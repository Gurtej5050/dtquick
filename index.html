if(document.getElementById("datatable")){if(!document.getElementById("datatable").getAttribute("db-table"))throw"Please note you can't continue using without the table name. Use attribute 'db-table' to specify the table name. For more info visit: https://github.com/mohiwalla/cdn.js/blob/mohiwalla/README.md";if(!document.getElementById("datatable").getAttribute("cols"))throw"Please note you can't continue using without specifying the columns. Use attribute 'cols' to specify the columns. For more info visit: https://github.com/mohiwalla/cdn.js/blob/mohiwalla/README.md";document.head.innerHTML+='<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Tilt+Neon&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"><link href="https://fonts.googleapis.com/css2?family=Montserrat" rel="stylesheet"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><style>*{user-select:none!important;font-family:"Montserrat",sans-serif}.tcenter{text-align:center}.center{align-items:center;justify-content:center}.flex{display:flex}body{padding:30px;min-height:105vh;overflow-x:hidden;margin-bottom:2vh}#table,#table th,#table tr,#table td,#table thead,#table tbody{padding:5px 40px;border-collapse:collapse;border:1px solid #000}span{font-size:20px;font-weight:700}th{user-select:none;cursor:pointer;text-align:left}.limitDiv{float:left}.dropdown{font-size:15px;margin-left:10px;font-weight:700;outline:none;padding:5px;border-radius:5px}.searchDiv{float:right}#search{padding:5px;border-radius:5px;border:1px solid #000;outline:none;font-size:15px}.order{width:20px;height:15px;margin-left:10px;top:114px;transition:all .3s}#searchFrom{transform:translate(-10px,0)}li{user-select:none!important}</style>',document.body.innerHTML+='<div class="limitDiv"><span>Limit</span><select name="limit" class="dropdown" id="limit"><option value="10">10</option><option value="20">20</option> <option value="30">30</option> <option value="40">40</option><option value="50">50</option></select></div><div class="searchDiv"> <span style="margin-left:10px;">From </span> <select class="dropdown" name="select" oninput="searchFrom = this.value; fetch();" id="searchFrom"><option value="">All</option></select><span>Search </span><input type="text" name="search" oninput="key = value; pageNo = 1; fetch();" id="search"></div><br><br><br><div class="flex center"><img id="loading" src="loading.gif" draggable="false" style="position:absolute; mix-blend-mode:darken; alt=""><table style="width:95vw;" id="table"> <thead> <tr id="th"></tr> </thead> <tbody id="tbody"></tbody> </table> </div><br> <h1 class="tcenter" id="notFound" style="display:none; font-weight:700; font-family: \'Tilt Neon\', cursive;">No records found ¯\\_(ツ)_/¯<hr></h1> <div id="pages"> <nav> <ul class="pagination justify-content-end"></ul></nav><div style="float:left; margin-top:-45px;" class="info"></div></div>';var pageCount,cols=document.getElementById("datatable").getAttribute("cols").replace(/ /g,"").split(","),db_table=document.getElementById("datatable").getAttribute("db-table");for(i=0;i<cols.length;i++){var col=cols[i].split("=");document.getElementById("th").innerHTML+="<th onclick=\"pageNo = 1; checkOrder(this); orderBy = '"+col[1]+'\'; fetch();" class="th asc" >'+col[0]+'<img style="cursor: pointer; position:absolute; mix-blend-mode: darken;" draggable="false" src=\'dn2.png\' class="order"></th>';var option=document.createElement("option");option.value=col[1],option.innerHTML=col[0],document.getElementById("searchFrom").append(option)}function setPagination(){for(document.getElementsByClassName("pagination")[0].innerHTML='<li class="page-item"><a class="page-link" tabindex="-1" onclick="setActive(1, true);" >First</a></li>',document.getElementsByClassName("pagination")[0].innerHTML+='<li class="page-item"><a class="page-link" tabindex="-1" onclick="setActive(parseInt(pageNo) - 1, true);" >Previous</a></li>',document.getElementsByClassName("pagination")[0].innerHTML+='<li class="page-item pages"><a onclick="setActive(parseInt(innerHTML), true);" class="page-link">1</a></li>',pageCount=Math.ceil(response.total/limit),i=2;i<=pageCount;i++)document.getElementsByClassName("pagination")[0].innerHTML+=`<li class="page-item pages"><a onclick="setActive(parseInt(innerHTML), true);" class="page-link">${i}</a></li>`;pageCount>1&&(document.getElementsByClassName("pagination")[0].innerHTML+='<li class="page-item"><a onclick="setActive(parseInt(pageNo) + 1, true);" class="page-link" tabindex="-1">Next</a></li>',document.getElementsByClassName("pagination")[0].innerHTML+='<li class="page-item"><a onclick="setActive(parseInt(pageCount), true);" class="page-link" tabindex="-1">Last</a></li>'),setDisabled(),setActive(pageNo,!1),pageCount>7&&managePagination(pageCount)}function managePagination(e){if(pageNo<pageCount/2){for(i=2;i<=pageNo-1;i++)document.querySelectorAll(".page-item")[i].style.display="none";for(i=parseInt(pageNo)+4;i<e;i++)document.querySelectorAll(".page-item")[i]&&(document.querySelectorAll(".page-item")[i].style.display="none");pageNo!=pageCount&&parseInt(pageNo)+6<e-1&&(dots=document.querySelectorAll(".page-link")[pageNo+3],dots.innerHTML="...",dots.style.fontWeight=900,dots.style.cursor="auto",dots.style.letterSpacing="2px")}else{for(i=6;i<=pageNo-1;i++)document.querySelectorAll(".page-item")[i].style.display="none";for(i=pageNo+3;i<e+2;i++)document.querySelectorAll(".page-item")[i].style.display="none";dots=document.querySelectorAll(".page-link")[5],dots.innerHTML="...",dots.style.fontWeight=900,dots.style.cursor="auto",dots.style.letterSpacing="2px"}}function setActive(e,t){return!isNaN(e)&&((!t||e!=pageNo)&&(pageItem=document.querySelectorAll(".page-item"),document.querySelector(".page-item.active")&&document.querySelector(".page-item.active").classList.remove("active"),document.querySelectorAll(".pages")[e-1].classList.add("active"),pageNo=e,void(t&&fetch())))}function setDisabled(){1==pageNo&&(document.getElementsByClassName("page-item")[0].classList.add("disabled"),document.getElementsByClassName("page-item")[1].classList.add("disabled"),document.getElementsByClassName("pages")[0].classList.add("active")),pageNo==pageCount&&document.getElementsByClassName("page-item")[parseInt(pageCount)+2]&&document.getElementsByClassName("page-item")[parseInt(pageCount)+3]&&(document.getElementsByClassName("page-item")[parseInt(pageCount)+2].classList.add("disabled"),document.getElementsByClassName("page-item")[parseInt(pageCount)+3].classList.add("disabled"))}const e=e=>document.getElementById(e);var response,searchQuery,notFound=document.getElementById("notFound"),orderBy=cols[0].split("=")[1],limit="10",key="",searchFrom="",order="ASC",pageNo=1;function fetch(){const t=new XMLHttpRequest;t.open("GET","fetchLi.php?query="+encodeURI(makeQuery()),!0),t.onreadystatechange=function(){e("loading").style.display="block",4==this.readyState&&200==this.status&&(e("loading").style.display="none",response=JSON.parse(this.responseText),setInfo(),setTable(),setPagination())},t.send()}function makeQuery(){if(rowsPerPage=1===pageNo?"":(pageNo-1)*limit+", ",""===key)searchQuery="";else if(""===searchFrom){searchQuery=" and ";for(var e=0;e<cols.length;e++)e<cols.length-1?searchQuery+=` ${cols[e].split("=")[1]} like '%${key}%' or`:e===cols.length-1&&(searchQuery+=` ${cols[e].split("=")[1]} like '%${key}%'`)}else searchQuery=` and ${searchFrom} like '%${key}%'`;return query=`SELECT * from ${db_table} where 1 ${searchQuery} ORDER BY ${orderBy} ${order} limit ${rowsPerPage} ${limit};`,query}function setInfo(){till=response.found,from=parseInt((pageNo-1)*limit+1),to=parseInt(pageNo*limit)-(limit-till),document.getElementsByClassName("info")[0].innerHTML="Showing "+till+" (from "+from+" to "+to+") out of "+response.total,till?notFound.style.display="none":notFound.style.display="block"}function setTable(){for(data=response.data,document.getElementById("tbody").innerHTML="",till=response.found,i=0;i<till;){for(var e=document.createElement("tr"),t=0;t<cols.length;t++){var n=document.createElement("td");n.textContent=data[i][cols[t].split("=")[1]],e.append(n)}document.getElementById("tbody").append(e),i++}}function checkOrder(e){setArrows(),e.classList.contains("asc")?(removeASC(),e.classList.remove("asc"),e.style.transform="",e.children[0].style.transform="rotate(-180deg) scale(1.2)",order="DESC"):(removeASC(),e.classList.add("asc"),e.children[0].style.transform="scale(1.7)",order="ASC")}function removeASC(){for(ths=document.getElementsByClassName("th"),i=0;i<ths.length;i++)ths[i].classList.remove("asc")}function setArrows(){for(arrows=document.getElementsByClassName("order"),i=0;i<arrows.length;i++)arrows[i].style.transform="rotate(0deg) scale(1)"}e("limit").addEventListener("input",(function(){limit=this.value,pageNo=1,fetch()})),this.onkeydown=()=>{search.focus()},document.addEventListener("load",fetch())}
